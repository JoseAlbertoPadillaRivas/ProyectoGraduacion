@{
    ViewBag.Title = "Mis Registros Clínicos";
    var nombrePaciente = "Juan Pérez";
}

<div class="text-center mb-4">
    <a href="@Url.Action("IndexHistorial", "Historial")" class="btn btn-primary btn-sm">Vista Usuario 1</a>
    <a href="@Url.Action("IndexHistorialAdmin", "Historial")" class="btn btn-secondary btn-sm">Vista Admin 2</a>
</div>

<h2 class="historial-header">Historial Clínico de @nombrePaciente</h2>

<div class="historial-section">
    <p>A continuación se muestran los registros clínicos disponibles para su revisión:</p>

    <div class="table-responsive">
        <table class="table table-striped table-bordered historial-table">
            <thead class="thead-dark">
                <tr>
                    <th>Fecha de Consulta</th>
                    <th>Diagnóstico</th>
                    <th>Tratamiento</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>01/08/2024</td>
                    <td>Caries Dental</td>
                    <td>Obturación</td>
                    <td>
                        <a href="@Url.Action("VerHistoria", "Historial", new { id = 1 })" class="btn btn-info btn-sm">Ver Detalles</a>
                        <a href="#" class="btn btn-secondary btn-sm descargar-btn">Descargar PDF</a>
                    </td>
                </tr>
                <tr>
                    <td>15/06/2024</td>
                    <td>Extracción de Molar</td>
                    <td>Extracción quirúrgica</td>
                    <td>
                        <a href="@Url.Action("VerHistoria", "Historial", new { id = 2 })" class="btn btn-info btn-sm">Ver Detalles</a>
                        <a href="#" class="btn btn-secondary btn-sm descargar-btn">Descargar PDF</a>
                    </td>
                </tr>
                <tr>
                    <td>22/04/2024</td>
                    <td>Limpieza Dental</td>
                    <td>Profilaxis</td>
                    <td>
                        <a href="@Url.Action("VerHistoria", "Historial", new { id = 3 })" class="btn btn-info btn-sm">Ver Detalles</a>
                        <a href="#" class="btn btn-secondary btn-sm descargar-btn">Descargar PDF</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    document.querySelectorAll('.descargar-btn').forEach(function (btn) {
        btn.addEventListener('click', function (event) {
            event.preventDefault();

            Swal.fire({
                title: '¿Descargar el archivo?',
                text: 'Confirme si desea descargar este archivo.',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Descargar',
                cancelButtonText: 'X'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire(
                        'Archivo Descargado',
                        'El archivo se ha descargado con éxito.',
                        'success'
                    );
                }
            });
        });
    });
</script>
